// Initialize the dropdowns as select2 dropdowns via jquery plugin
$(document).ready(function() {
    $('.single-select').select2();
});

//populate the geography dropdown based on the level that's been chosen in the level dropdown
$("#level-select").change(function() {
	//remove any existing option from the geography select
	$("#geo-select option").remove();
	// get the value of item selected in level-select
	var _val = this.options[this.selectedIndex].value;
	console.log(_val);
	// go through the geographies object, find the matching value, and create an option for each
	for (var i in geographies[_val]) {
		// create option target
		var op = document.createElement('option');
		// set option value value
		op.value = geographies[_val][i];
		// set the display label
		op.text = geographies[_val][i];
		// append it to geography dropdown
		$('#geo-select').append(op);
	}
});

// check for the selection change
$("#fill-select").change(function() {
	var val = $(this).val();
	var fill = selectObj.fills[val].fill;
	var minFill = selectObj.fills[val].min;
	var maxFill = selectObj.fills[val].max;

	$('#minFill').text(minFill);
	$('#maxFill').text(maxFill);

	map.setPaintProperty('countyFill','fill-color',fill);

});

$("#point-select").change(function() {
	var val = $(this).val();
	var size = selectObj.points[val].circles;
	var minSize = selectObj.points[val].min;
	var maxSize = selectObj.points[val].max;
	$('#minSize').text(minSize);
	$('#maxSize').text(maxSize);
	console.log(minSize);

	if (val === '4') {
		map.setLayoutProperty('points','visibility','none');
		map.setLayoutProperty('gaHospitals','visibility','visible');
	} else {
		map.setLayoutProperty('gaHospitals','visibility','none');
		map.setPaintProperty('points','circle-radius',size);
		map.setLayoutProperty('points','visibility','visible');
	}
});


